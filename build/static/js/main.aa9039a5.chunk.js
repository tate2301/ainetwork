(this.webpackJsonpfakenews=this.webpackJsonpfakenews||[]).push([[0],{120:function(e,t,s){},160:function(e,t){},221:function(e,t,s){"use strict";s.r(t);var a=s(2),c=s(0),r=s.n(c),n=s(39),l=s.n(n),i=(s(120),s(51)),o=s(22),d=s(33),j=s.n(d),u=s(234),b=(s(137),s(233)),m=s(83),h=s(235),x=s(238),p=s(11),O=s(232),f=s(46),g=s(231),v=s(237),w=s(236);function N(){var e=Object(p.f)(),t=Object(g.a)();function s(){e.push("/signup")}return Object(a.jsx)("div",{className:"flex w-full justify-center py-12",children:Object(a.jsxs)("div",{className:"w-1/2",children:[Object(a.jsxs)("div",{className:"block",children:[Object(a.jsx)("p",{className:"text-2xl",children:"Authenticate to Twitter Clone"}),Object(a.jsx)("p",{children:"Use your username and password to sign in to your account."})]}),Object(a.jsx)(m.c,{onSubmit:function(s){console.log(s),j.a.post("/login",{username:s.username,password:s.password}).then((function(s){s.data.error?t({title:"We hit a roadblock.",description:s.data.message,status:"error",duration:5e3,isClosable:!0}):(localStorage.setItem("full_name",s.data.full_name),localStorage.setItem("user_id",s.data.id),localStorage.setItem("username",s.data.username),e.push("/"),window.location.reload())})).catch((function(e){console.log(e),t({title:"We hit a roadblock.",description:e,status:"error",duration:5e3,isClosable:!0})}))},children:function(e){var t=e.formProps;return Object(a.jsxs)("form",Object(o.a)(Object(o.a)({className:"min-w-64"},t),{},{children:[Object(a.jsx)("div",{children:Object(a.jsx)("div",{className:"",children:Object(a.jsx)(h.a,{isRequired:!0,name:"username",children:function(e){var t=e.fieldProps;return Object(a.jsx)(c.Fragment,{children:Object(a.jsx)(O.a,Object(o.a)({placeholder:"Username"},t))})}})})}),Object(a.jsx)(h.a,{isRequired:!0,name:"password",children:function(e){var t=e.fieldProps;return Object(a.jsx)(c.Fragment,{children:Object(a.jsx)(O.a,Object(o.a)({placeholder:"Password",type:"password"},t))})}}),Object(a.jsxs)(x.a,{children:[Object(a.jsx)(b.a,{className:"mr-4",onClick:s,appearance:"default",children:"Don't have an account? Sign up."}),Object(a.jsx)(b.a,{type:"submit",appearance:"primary",children:"Sign In"})]})]}))}})]})})}function y(){var e=Object(p.f)();function t(){e.push("/login")}var s=Object(g.a)();return Object(a.jsx)("div",{className:"flex w-full justify-center py-12",children:Object(a.jsxs)("div",{className:"w-1/2",children:[Object(a.jsxs)("div",{className:"block",children:[Object(a.jsx)("p",{className:"text-2xl",children:"Sign Up to Twitter Clone"}),Object(a.jsx)("p",{children:"Provide your details to sign up for Twitter with Fake news monitoring."})]}),Object(a.jsx)(m.c,{onSubmit:function(t){console.log(t),j.a.post("/sign_up",{username:t.username,password:t.password,full_name:t.full_name}).then((function(t){console.log(t.data),t.data.error?s({title:"We hit a roadblock.",description:t.data.message,status:"error",duration:5e3,isClosable:!0}):s({title:"Action successfull.",description:"Account has been created successfuly. Please login",status:"success",duration:5e3,isClosable:!0}),e.push("/login")})).catch((function(e){console.log(e),s({title:"We hit a roadblock.",description:e,status:"error",duration:5e3,isClosable:!0})}))},children:function(e){var s=e.formProps;return Object(a.jsxs)("form",Object(o.a)(Object(o.a)({className:"min-w-64"},s),{},{children:[Object(a.jsx)("div",{children:Object(a.jsx)("div",{className:"",children:Object(a.jsx)(h.a,{isRequired:!0,name:"username",children:function(e){var t=e.fieldProps;return Object(a.jsx)(c.Fragment,{children:Object(a.jsx)(O.a,Object(o.a)({placeholder:"Username"},t))})}})})}),Object(a.jsx)(h.a,{isRequired:!0,name:"password",children:function(e){var t=e.fieldProps;return Object(a.jsx)(c.Fragment,{children:Object(a.jsx)(O.a,Object(o.a)({placeholder:"Password",type:"password"},t))})}}),Object(a.jsx)("div",{children:Object(a.jsx)("div",{className:"",children:Object(a.jsx)(h.a,{isRequired:!0,name:"full_name",children:function(e){var t=e.fieldProps;return Object(a.jsx)(c.Fragment,{children:Object(a.jsx)(O.a,Object(o.a)({placeholder:"Full name"},t))})}})})}),Object(a.jsxs)(x.a,{children:[Object(a.jsx)(b.a,{className:"mr-4",onClick:t,appearance:"default",children:"Already have an account? Sign in."}),Object(a.jsx)(b.a,{type:"submit",appearance:"primary",children:"Sign Up"})]})]}))}})]})})}function _(){var e=Object(f.b)("/following?user_id="+localStorage.getItem("user_id")),t=e.data,s=e.error;return Object(a.jsx)("div",{className:"w-full p-4",children:Object(a.jsxs)("div",{className:"p-4 rounded shadow",children:[Object(a.jsx)("div",{className:"mb-4",children:Object(a.jsx)("p",{className:"text-xl font-medium text-gray-800",children:"You are currently following"})}),Object(a.jsx)("div",{children:t?t.data.map((function(e){return Object(a.jsx)(I,{user:e})})):s?Object(a.jsx)("p",{className:"text-red-600",children:"Error getting users"}):Object(a.jsx)("p",{children:"Loading..."})})]})})}function S(){var e=Object(f.b)("/users?user_id="+localStorage.getItem("user_id")),t=e.data,s=e.error;return Object(a.jsx)("div",{className:"w-full p-4",children:Object(a.jsxs)("div",{className:"p-4 rounded shadow",children:[Object(a.jsx)("div",{className:"mb-4",children:Object(a.jsx)("p",{className:"text-xl font-medium text-gray-800",children:localStorage.getItem("user_id")?"You should follow":"Users available on our platform"})}),Object(a.jsx)("div",{children:t?t.data.map((function(e){return Object(a.jsx)(k,{user:e})})):void 0===t?Object(a.jsx)("p",{children:"No recommended users to follow."}):s?Object(a.jsx)("p",{className:"text-red-600",children:"Error getting users"}):Object(a.jsx)("p",{children:"Loading..."})})]})})}function k(e){var t=e.user,s=Object(g.a)();return Object(a.jsxs)("div",{className:"flex justify-between py-2",children:[Object(a.jsxs)("div",{className:"w-1/2",children:[Object(a.jsx)("p",{className:"text-md text-gray-800",children:t.full_name}),Object(a.jsxs)("p",{className:"text-sm text-gray-600",children:["@",t.username]})]}),localStorage.getItem("user_id")?Object(a.jsx)("div",{children:Object(a.jsx)(b.a,{onClick:function(){j.a.post("/follow",{user_id:localStorage.getItem("user_id"),follow_id:t.id}).then((function(e){console.log(e.data.message),e.data.error?s({title:"We hit a roadblock.",description:e.data.message+"@"+t.username,status:"error",duration:9e3,isClosable:!0}):s({title:"Action successfull.",description:"You are now following user @".concat(t.username," - ").concat(t.full_name,"."),status:"success",duration:5e3,isClosable:!0})})).catch((function(e){s({title:"We hit a roadblock.",description:e,status:"error",duration:9e3,isClosable:!0})}))},appearance:"primary",children:"Follow"})}):null]})}function I(e){var t=e.user,s=Object(g.a)();return t.id===parseInt(localStorage.getItem("user_id"))?Object(a.jsx)(a.Fragment,{}):Object(a.jsxs)("div",{className:"flex justify-between py-2",children:[Object(a.jsxs)("div",{className:"w-1/2",children:[Object(a.jsx)("p",{className:"text-md text-gray-800",children:t.full_name}),Object(a.jsxs)("p",{className:"text-sm text-gray-600",children:["@",t.username]})]}),Object(a.jsx)("div",{className:"w-1/2 flex justify-end",children:Object(a.jsx)(b.a,{onClick:function(){j.a.post("/unfollow",{user_id:localStorage.getItem("user_id"),follow_id:t.id}).then((function(e){console.log(e.data.message),e.data.error?s({title:"We hit a roadblock.",description:e.data.message+"@"+t.username,status:"error",duration:9e3,isClosable:!0}):s({title:"Action successfull.",description:"You have unfollowed user @".concat(t.username," - ").concat(t.full_name,"."),status:"success",duration:5e3,isClosable:!0})})).catch((function(e){s({title:"We hit a roadblock.",description:e,status:"error",duration:9e3,isClosable:!0})}))},appearance:"default",children:"Unfollow"})})]})}function C(){var e=Object(f.b)("/tweets?user_id="+localStorage.getItem("user_id")),t=e.data,s=e.error,r=Object(c.useState)(!0),n=Object(i.a)(r,2),l=n[0],o=n[1],d=t?t.tweets.reverse():[];return Object(a.jsxs)("div",{className:"w-full flex",children:[Object(a.jsxs)("div",{className:"lg:w-1/2",children:[Object(a.jsx)("div",{className:"mb-8 mt-4",children:Object(a.jsx)(P,{})}),Object(a.jsxs)("div",{className:"block",children:[Object(a.jsx)(v.a,{htmlFor:"email-alerts",children:"Show fake news?"}),Object(a.jsx)(w.a,{defaultIsChecked:l,onChange:function(){return o(!l)},id:"email-alerts"})]}),t?d.map((function(e){return e.down_votes>=50&&l?Object(a.jsx)(F,{tweet:e,showFake:l}):e.down_votes>=50&&!l?Object(a.jsx)(a.Fragment,{}):Object(a.jsx)(F,{tweet:e,showFake:l})})):void 0===t?Object(a.jsx)("p",{className:"shadow rounded text-center w-full my-8",children:"Follow users to view their posts."}):s?Object(a.jsx)("p",{className:"text-red-600",children:"Error getting users"}):Object(a.jsx)("p",{children:"Loading..."})]}),Object(a.jsxs)("div",{className:"lg:w-1/2",children:[Object(a.jsx)("div",{className:"p-4",children:localStorage.getItem("user_id")?Object(a.jsxs)("div",{className:"border rounded p-4",children:[Object(a.jsxs)("p",{children:["Currently logged in as: @",localStorage.getItem("username")," - ",localStorage.getItem("full_name")]}),Object(a.jsx)("p",{children:Object(a.jsx)(b.a,{onClick:function(){localStorage.removeItem("user_id"),localStorage.removeItem("username"),localStorage.removeItem("full_name"),window.location.reload()},appearance:"default",children:"Logout"})})]}):null}),Object(a.jsx)(S,{}),Object(a.jsx)("div",{className:"p-8"}),localStorage.getItem("user_id")?Object(a.jsx)(_,{}):null]})]})}function F(e){var t=e.tweet,s=(e.showFake,Object(g.a)());function c(e){j.a.post("/vote",{score:e,user_id:localStorage.getItem("user_id"),id:t.id}).then((function(e){s({title:"Thank you for your opinion.",description:"Your opinion helps us make better and more accurate predictions of fake news.",status:"success",duration:9e3,isClosable:!0})})).catch((function(e){s({title:"We hit a roadblock.",description:e,status:"error",duration:9e3,isClosable:!0})}))}return Object(a.jsx)("div",{className:"block my-4",children:Object(a.jsxs)("div",{className:"rounded-md shadow p-4",children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("p",{className:"text-xl font-medium text-gray-800",children:t.full_name}),Object(a.jsxs)("p",{className:"text-gray-700",children:["@",t.username]})]}),Object(a.jsx)("div",{className:"py-1 text-gray-600",children:t.text}),Object(a.jsxs)("div",{className:"flex justify-between",children:[parseFloat(t.prediction)<.5?Object(a.jsx)(u.a,{appearance:"success",children:"REAL"}):parseFloat(t.prediction)>.5&&t.down_votes<50?Object(a.jsx)(u.a,{appearance:"moved",children:"PREDICTED AS FAKE NEWS"}):Object(a.jsx)(u.a,{appearance:"removed",children:"FAKE NEWS"}),Object(a.jsxs)(u.a,{appearance:parseFloat(t.prediction)>.5?"removed":"success",children:[(100*Math.abs((.5-parseFloat(t.prediction))/.5)).toFixed(0)-E(2,10),"%"]})]}),parseFloat(t.prediction)>.5&&(null===t.yourScoring||void 0===t.yourScoring)?t.author!==parseInt(localStorage.getItem("user_id"))?Object(a.jsxs)("div",{className:"mt-4",children:[Object(a.jsxs)("div",{className:"w-full",children:[Object(a.jsx)("p",{className:"text-xl text-gray-800",children:"We value your opinion"}),Object(a.jsx)("p",{children:"Help us by telling us whether this news is real or fake."})]}),Object(a.jsxs)("div",{className:"w-full flex justify-between mt-2",children:[Object(a.jsx)(b.a,{appearance:"primary",className:"w-1/3",onClick:function(){return c(0)},children:"Real"}),Object(a.jsx)(b.a,{appearance:"danger",className:"w-1/3",onClick:function(){return c(1)},children:"Fake"})]})]}):null:Object(a.jsx)("div",{})]})})}function P(e){return Object(a.jsx)(m.c,{onSubmit:function(e,t){j.a.post("/tweets",{author:localStorage.getItem("user_id"),text:e.text}).then((function(e){console.log(e.data)})).catch((function(e){console.log(e)}))},children:function(e){var t=e.formProps;return Object(a.jsxs)("form",Object(o.a)(Object(o.a)({},t),{},{children:[Object(a.jsx)(h.a,{isRequired:!0,name:"text",children:function(e){var t=e.fieldProps;return Object(a.jsx)(c.Fragment,{children:Object(a.jsx)(O.a,Object(o.a)({placeholder:"Type Something"},t))})}}),Object(a.jsx)(x.a,{children:Object(a.jsx)(b.a,{type:"submit",appearance:"primary",children:"Post Tweet"})})]}))}})}function E(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}var W=function(){var e=Object(p.f)();return Object(c.useEffect)((function(){void 0===localStorage.getItem("user_id")&&e.push("/login")}),[e]),Object(a.jsx)("div",{className:"container mx-auto px-4 text-gray-600",children:Object(a.jsxs)(p.c,{children:[Object(a.jsx)(p.a,{path:"/login",component:N}),Object(a.jsx)(p.a,{path:"/signup",component:y}),Object(a.jsx)(p.a,{path:"/",exact:!0,component:localStorage.getItem("user_id")?C:N})]})})},A=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,239)).then((function(t){var s=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,n=t.getTTFB;s(e),a(e),c(e),r(e),n(e)}))},R=s(112),T=s(60),U=s(47);l.a.render(Object(a.jsx)(T.a,{children:Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(f.a,{value:{fetcher:function(){return fetch.apply(void 0,arguments).then((function(e){return e.json()}))},refreshInterval:1e3},children:Object(a.jsx)(U.a,{children:Object(a.jsx)(R.a,{domain:"YOUR_DOMAIN",clientId:"YOUR_CLIENT_ID",redirectUri:window.location.origin,children:Object(a.jsx)(W,{})})})})})}),document.getElementById("root")),A()}},[[221,1,2]]]);